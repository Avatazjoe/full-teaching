<div id="video-session-div">

  <a id="side-menu-button" materialize="sideNav" data-activates="slide-out" [materializeParams]="[{draggable: false}]"><i id="fixed-icon" class="material-icons video-icon">menu</i></a>
  <div class="row no-margin" style="position: fixed; width: 100%; z-index: 900;">
    <div class="col s12 m12 l12 no-padding-right"><a class="btn-floating btn-large waves-effect waves-light red floating-button" (click)="toggleFullScreen()"><i class="material-icons">{{fullscreenIcon}}</i></a></div>
    <div class="col s12 m12 l12 no-padding-right"><a *ngIf="this.authenticationService.isStudent()" class="btn-floating btn-large waves-effect waves-light red floating-button" (click)="askForIntervention()"><i class="material-icons">{{interventionIcon}}</i></a></div>
    <div class="row no-margin" *ngIf="this.authenticationService.isTeacher()">
      <div *ngFor="let userObject of this.usersIntervention" class="col s12 m12 l12 no-padding-right">
        <a class="btn-floating btn-large waves-effect floating-button white" [style.border-color]="userObject.color" style="border: 7px;border-style: solid;">
          <i [style.color]="userObject.color" style="margin-left: -7px;margin-top: -7px;" materialize="tooltip" class="material-icons" data-position="left" data-delay="65" [attr.data-tooltip]="userObject.user">person</i>
        </a>
      </div>
    </div>
  </div>

  <div *ngIf="currentSession">
    <div class="session-title-div">
      <h2 id="session-title">{{sessionId}}</h2>
    </div>
    <div>
      <stream *ngFor="let s of streams" [stream]="s"></stream>
    </div>
    <div class="session-bottom-div valign-wrapper" (mouseenter)="this.controlsShown = true"  (mouseleave)="this.controlsShown = false">
      <div id="div-video-control" [class.div-video-control-shown]="this.playPauseIcon==='play_arrow'" [class.fade-in-controls]="this.controlsShown" [class.fade-out-controls]="!this.controlsShown">
        <div class="box-video-control">
          <a class="btn-floating waves-effect video-control" (click)="togglePlayPause()">
            <i class="material-icons video-control-icon">{{this.playPauseIcon}}</i>
          </a>
          <a class="btn-floating waves-effect video-control" (click)="toggleMute()">
            <i class="material-icons video-control-icon">{{this.volumeMuteIcon}}</i>
          </a>
          <input id="slider-volume" name="slider-volume" type="range" min="0" max="1" step="0.01" [(ngModel)]="this.volumeLevel" (ngModelChange)="changeVolume($event)"/>
        </div>
      </div>
    </div>
  </div>

  <ul id="slide-out" class="side-nav">
    <i (click)="this.exitFromSession()" id="exit-icon" class="right material-icons video-icon" [title]="'Exit'">exit_to_app</i>
    <i (click)="changeShowChat()" id="show-chat-icon" class="left material-icons video-icon">{{this.showChatIcon}}</i>
    <div class="chat_wrapper">

      <div *ngIf="showChat" id="message-box-cont">
        <div class="message_box" id="message_box">
          <div *ngFor="let chatline of this.chatLines">
            <app-chat-line [chatLine]="chatline"></app-chat-line>
          </div>
        </div>
        <div class="panel">
          <form (ngSubmit)="sendMessage()">
            <input [(ngModel)]="myMessage" type="text" name="message" id="message" placeholder="Message" maxlength="256" autocomplete="off"/>
            <input *ngIf="this.myMessage" type="submit" id="send-btn" class="btn waves-effect button-small" value="Send">
            <a *ngIf="!this.myMessage" id="fake-send-btn" class="btn waves-effect button-small disabled">Send</a>
          </form>
        </div>
      </div>

      <div *ngIf="!showChat">
        <div class="num-attenders-div">
          <span class="num-connected">{{this.usersConnected.length}}</span>
           of
           <span class="num-total">{{this.course.attenders.length}}</span>
            attenders connected
        </div>
        <div *ngFor="let userObject of this.usersConnected" class="attender-name" [style.color]="userObject.userColor">
          {{userObject.userName}}
        </div>
      </div>

    </div>
  </ul>

</div>
